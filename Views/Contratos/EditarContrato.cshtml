@model Tp_inmobiliaria.Models.Contratos

@{
    ViewData["Title"] = "Editar Contrato";
}

<div class="card shadow-sm p-4 mx-auto" style="max-width: 700px; border-radius: 12px; background-color: #fefefe;">
    <h4 class="mb-4 text-center">Editar Contrato</h4>

    <form asp-action="GuardarEdicionContrato" method="post">
        <div asp-validation-summary="All" class="text-danger mb-3"></div>
            <input asp-for="id" class="form-control" readonly />

        <div class="mb-3">
            <label asp-for="id_inmueble" class="form-label">Inmueble</label>
            <select asp-for="id_inmueble" class="form-select" id="InmuebleId">
                <option value="">-- Seleccione un inmueble --</option>
                @foreach (var i in ViewBag.Inmuebles)
                {
                    <option value="@i.Id">@i.Direccion - @i.Uso - @i.Ambientes</option>
                }
            </select>
            <span asp-validation-for="id_inmueble" class="text-danger"></span>
        </div>

        <div class="mb-3">
            <label asp-for="id_inquilino" class="form-label">Inquilino</label>
            <select asp-for="id_inquilino" class="form-select" id="InquilinoId">
                <option value="">-- Seleccione un inquilino --</option>
                @foreach (var inq in ViewBag.Inquilinos)
                {
                    <option value="@inq.Id">@inq.Nombre - Dni: @inq.Dni</option>
                }
            </select>
            <span asp-validation-for="id_inquilino" class="text-danger"></span>
        </div>

        <div class="mb-3">
            <label asp-for="fecha_inicio" class="form-label"></label>
            <input asp-for="fecha_inicio" type="date" class="form-control" />
            <span asp-validation-for="fecha_inicio" class="text-danger"></span>
        </div>

        <div class="mb-3">
            <label asp-for="fecha_fin" class="form-label"></label>
            <input asp-for="fecha_fin" type="date" class="form-control" />
            <span asp-validation-for="fecha_fin" class="text-danger"></span>
        </div>

        <div class="mb-3">
            <label asp-for="monto_mensual" class="form-label"></label>
            <input asp-for="monto_mensual" type="number" step="0.01" class="form-control" />
            <span asp-validation-for="monto_mensual" class="text-danger"></span>
        </div>

        <div class="mb-3">
            <label asp-for="id_creador" class="form-label">Creador</label>
            <select asp-for="id_creador" class="form-select" id="UsuariosId">
                <option value="">-- Seleccione un Usuario --</option>
                @foreach (var u in ViewBag.usuarios)
                {
                    <option value="@u.Id">@u.NombreUsuario - Rol: @u.RolUsuario</option>
                }
            </select>
            <span asp-validation-for="id_creador" class="text-danger"></span>
        </div>

        <div class="mb-3">
            <label asp-for="id_finalizador" class="form-label">Finalizador</label>
            <select asp-for="id_finalizador" class="form-select" id="UsuariosId">
                <option value="">-- Seleccione un Usuario --</option>
                @foreach (var u in ViewBag.usuarios)
                {
                    <option value="@u.Id">@u.NombreUsuario - Rol: @u.RolUsuario</option>
                }
            </select>
            <span asp-validation-for="id_finalizador" class="text-danger"></span>
        </div>

        <div class="d-flex justify-content-between mt-4">
            <button type="submit" class="btn btn-primary">Guardar</button>
            <a asp-action="Index" class="btn btn-secondary">Cancelar</a>
        </div>
    </form>
</div>


<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0/dist/css/select2.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0/dist/js/select2.min.js"></script>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}

<script>
    $(document).ready(function () {
        $('#InmuebleId').select2({
            placeholder: "Seleccione un inmueble",
            allowClear: true
        });

        $('#InquilinoId').select2({
            placeholder: "Seleccione un inquilino",
            allowClear: true
        });
        $('#UsuariosId').select2({
            placeholder: "Seleccione un usuario",
            allowClear: true
    });
</script>